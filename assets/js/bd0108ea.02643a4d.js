"use strict";(self.webpackChunkcosmwasmsauru=self.webpackChunkcosmwasmsauru||[]).push([[2974],{5659:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"core/installation","title":"Installation","description":"Setting up the environment","source":"@site/docs/core/installation.md","sourceDirName":"core","slug":"/core/installation","permalink":"/docs/core/installation","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/docs/core/introduction"},"next":{"title":"Entrypoints","permalink":"/docs/core/entrypoints/"}}');var i=n(4848),s=n(8453);const r={sidebar_position:1},a="Installation",l={},c=[{value:"Setting up the environment",id:"setting-up-the-environment",level:2},{value:"Setting up the contract",id:"setting-up-the-contract",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"installation",children:"Installation"})}),"\n",(0,i.jsx)(t.h2,{id:"setting-up-the-environment",children:"Setting up the environment"}),"\n",(0,i.jsx)(t.p,{children:"Before diving right into writing code, you need to install some tooling in order to compile your contract.\nCosmWasm is luckily rather self-contained and therefore needs little external tooling to compile.\nOur only external dependency is Rust, which you need to install for your platform."}),"\n",(0,i.jsx)(t.admonition,{title:"Installing Rust",type:"info",children:(0,i.jsxs)(t.p,{children:["We recommend installing Rust using the official ",(0,i.jsx)(t.a,{href:"https://rustup.rs",children:"rustup installer"}),". This makes it easy to stay on\nthe most recent Rust version and to install compiler targets."]})}),"\n",(0,i.jsxs)(t.admonition,{title:"Optimizing compiler",type:"tip",children:[(0,i.jsxs)(t.p,{children:["For production builds you probably also want to install ",(0,i.jsx)(t.a,{href:"https://www.docker.com/",children:"Docker"}),", too.\nThis is because we offer the ",(0,i.jsx)(t.a,{href:"https://github.com/CosmWasm/optimizer",children:"CosmWasm Optimizing Compiler"}),", which uses\na Docker image to build the smallest contract possible in a deterministic fashion."]}),(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:["Additional information about the ",(0,i.jsx)(t.strong,{children:"Optimizing Compiler"})]}),(0,i.jsxs)(t.p,{children:["Please note that this image is intended for reproducible production builds.\nIt is ",(0,i.jsx)(t.em,{children:"not"})," optimized for development or in general environments where you\nwant to iterate quickly. The builder is optimizing for size, not compilation speed.\nIf you want to slim down your contract for development, you can do so by\ntweaking your Cargo profile."]}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-toml",children:'[profile.dev]\nlto = "thin"\nstrip = true\n'})}),(0,i.jsx)(t.p,{children:"If you want to build with native tools, you might miss out on determinism, but you can still build your\ncontract into a small size like so:"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:'RUSTFLAGS="-C link-arg=-s" cargo build --release --lib --target=wasm32-unknown-unknown\nwasm-opt -Os --signext-lowering "target/wasm32-unknown-unknown/release/my-contract.wasm" -o "artifacts/my-contract.wasm"\n'})}),(0,i.jsxs)(t.p,{children:["(Note: Replace ",(0,i.jsx)(t.code,{children:"my-contract"})," with the name of your contract. You also need ",(0,i.jsx)(t.code,{children:"wasm-opt"})," installed,\nwhich is part of the ",(0,i.jsx)(t.a,{href:"https://github.com/WebAssembly/binaryen",children:"binaryen"})," project.)"]})]})]}),"\n",(0,i.jsx)(t.p,{children:"After installing Rust, you need to add the WebAssembly target.\nThis is needed so Rust knows how to build your code to WebAssembly."}),"\n",(0,i.jsxs)(t.p,{children:["To install the WebAssembly target using ",(0,i.jsx)(t.strong,{children:"rustup"}),", run the following command:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"rustup target add wasm32-unknown-unknown\n"})}),"\n",(0,i.jsx)(t.p,{children:"Now that we set up the foundation we just need two more tools:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.strong,{children:"cargo-generate"})}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"cargo-run-script"})," (this is required to later optimize your contract for production)"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"To install those, run the following commands:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"cargo install cargo-generate --features vendored-openssl\ncargo install cargo-run-script\n"})}),"\n",(0,i.jsx)(t.h2,{id:"setting-up-the-contract",children:"Setting up the contract"}),"\n",(0,i.jsx)(t.p,{children:"Now that the environment is all done, let's create the project!"}),"\n",(0,i.jsx)(t.p,{children:"Luckily you don't need to start from scratch, we already took care of the most tedious parts of\nsetting up a new project in form of a template!"}),"\n",(0,i.jsx)(t.p,{children:"In order to generate a fresh project, run this command and off we go:"}),"\n",(0,i.jsxs)(t.admonition,{type:"tip",children:[(0,i.jsx)(t.mdxAdmonitionTitle,{}),(0,i.jsxs)(t.p,{children:["Make sure to change ",(0,i.jsx)(t.code,{children:"PROJECT_NAME"})," to the name of your contract!"]})]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"$ cargo generate --git https://github.com/CosmWasm/cw-template.git --name PROJECT_NAME\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Now you should have a ready contract project in a new folder called ",(0,i.jsx)(t.code,{children:"PROJECT_NAME"})," (or whatever you changed it to)."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var o=n(6540);const i={},s=o.createContext(i);function r(e){const t=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);